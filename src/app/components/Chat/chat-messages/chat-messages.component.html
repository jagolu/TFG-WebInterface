<div class="w-100"  *ngIf="!loading">
  <div *ngFor="let userMessage of messages; let i = index" class="d-block" >
    <div *ngIf="userMessage.username!=''" [ngStyle]="{'height': calculateHeight(i)}">
      <div class="card mb-2 w-50" [ngClass]="{'float-right': userMessage.publicUserId == getPublicUserid()}">
        <div class="card-body p-1">
          <div class="card-title mb-1" [ngClass]="{'text-right': userMessage.publicUserId == getPublicUserid()}">
            <span class="badge"
                  [ngClass]="{'badge-primary': getPublicUserid() == userMessage.publicUserId,
                  'badge-success': getPublicUserid()!=userMessage.publicUserId}">{{userMessage.username}}</span>
          </div>
          <div class="card-text" [ngClass]="{'text-right': userMessage.publicUserId == getPublicUserid()}">
            <div *ngFor="let mssg of userMessage.messages">{{mssg.message}}</div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="userMessage.username=='' && userMessage.publicUserId!=getPublicUserid()" 
          class="text-center" style="height: 30px">
      <div class="row w-100 m-0">
        <div class="col-12"><small>{{userMessage.messages[0].message}}</small></div>
      </div>
    </div>
  </div>
  <hr class="m-0 mt-2 mb-2">
  <form [formGroup]="sendChatMessageForm" class="sticky-bottom form-group" (ngSubmit)="send()">
    <input class="form-control" style="font-size:14px" formControlName="message" (focus)="startReseting()" (focusout)="stopReseting()">
  </form>
</div>
<!-- <div *ngIf="loading" style="height:105px" class="text-center">
  <i class="fa fa-cog fa-spin fa-5x fa-fw align-middle"></i>
</div> -->